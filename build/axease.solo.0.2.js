window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}()),function(e){if(!e._$){e._$={};var t=e._$;t.f=function(e){return document.querySelectorAll(e)},t.on=function(e,t,n){for(var a=0;a<t.length;a++)e.addEventListener(t[a],n)},t.log=function(e,t){this.lastLog!=e&&(console.log(e,t),this.lastLog=e)},t.getScreen=function(e){var n=t.f(e)[0],a=n.getContext("2d");return{canvas:n,context:a}},t.img={},t.createImage=function(e,n){function a(){r--,0==r&&n&&n()}if("object"==typeof e){var r=e.length;return void e.forEach(function(e){t.img[e.id]=t.createImage(e.url,a)})}var i=document.createElement("img");return i.onload=function(){n&&n(i)},i.src=e,i},t.getElTop=function(e){return e.getBoundingClientRect().top+t.scrollY},t.isElVisible=function(e){var n=t.getElTop(e),a=e.offsetHeight,r=n+a;return t.scrollY+t.screenHeight>=n&&t.scrollY<r},t.prevTime=Date.now(),t.fps=24,t.dt=1e3/t.fps,t.updates=[],t.draws=[],t.accumulator=0,t.scrollY=0,t.niceY=0,t.scrolled=!1,t.resize=!1,t.screenWidth=0,t.screenHeight=0,t.midpoint=Math.round(window.innerHeight/2),t.start=function(){t._started||(t._started=!0,t.update())},t.addUpdate=function(e,n){e&&t.updates.push(e),n&&t.draws.push(n),t.update(!0)},t._runUpdates=function(){t.updates.forEach(function(e,n){e(t.dt)})},t._runDraw=function(){t.draws.forEach(function(e,n){e(t.dt)})},t.update=function(e){requestAnimationFrame(function(){if(!t.updating){var n=Date.now();t.time=n,t.passed=n-t.prevTime,t.resize=window.innerHeight!==t.screenHeight||window.innerWidth!==t.screenWidth,t.screenWidth=window.innerWidth,t.screenHeight=window.innerHeight;var a=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;if(t.scrolled=a!==t.scrollY,t.scrollY=a,t.niceY=t.scrollY/(document.body.offsetHeight-t.screenHeight),e)t.scrolled=!0,t._runUpdates();else for(t.accumulator+=t.passed;t.accumulator>=t.dt;)t._runUpdates(),t.accumulator-=t.dt;t._runDraw(),t.prevTime=n,t.update()}})}}}(window);var Axease=function(){var e=this;return e.elements=[],e.addScreen=function(t){e.elements.push(t),_$.update(!0)},e.draw=function(){e.elements.forEach(function(e){e.draw&&(e.screen.context.clearRect(0,0,e.screen.canvas.width,e.screen.canvas.height),e.draw.forEach(function(e){e()}))})},e.update=function(){e.elements.forEach(function(t){if(t.draw=!1,_$.isElVisible(t.screen.canvas)){var n={canvas:t.screen.canvas,context:t.screen.context,top:_$.getElTop(t.screen.canvas),halfWidth:.5*t.screen.canvas.width,halfHeight:.5*t.screen.canvas.height};t.sprites.forEach(function(a){var r;a.scroll&&_$.scrolled?r=e.scrollAnimation(a,n):a.mouse?r=e.mouseAnimation(a,n):a.time&&(r=e.timeAnimation(a,n)),r&&(t.draw||(t.draw=[]),t.draw.push(function(){t.screen.context.drawImage(e.currentFrame(a),r.x+n.halfWidth-a.width/2,r.y+n.halfHeight-a.height/2,a.width||a.img.naturalWidth,a.height||a.img.naturalHeight)}))})}})},e.currentFrame=function(e){if(!e.animation)return e.img;if(!e.animation.canvas){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");e.animation.canvas=t,e.animation.context=n,e.animation.hasOwnProperty("animationIndex")||(e.animation.animationIndex=0)}var a=e.animation;return a.length&&(a=e.animation[a.animationIndex]),a.hasOwnProperty("frame")||(a.frame=0,a.lastDraw=Date.now()),_$.time>a.lastDraw+a.duration&&(a.frame++,a.frame>=a.frames.length&&(a.frame=0),a.lastDraw=_$.time),e.animation.context.clearRect(0,0,e.width,e.height),e.animation.context.drawImage(e.img,a.frames[a.frame][0]*e.width,a.frames[a.frame][1]*e.height,e.width,e.height,0,0,e.width,e.height),e.animation.canvas},e.timeAnimation=function(e,t){var n=(t.canvas,t.context,t.halfWidth),a=t.halfHeight,r=e.time;if(x=0,r.hasOwnProperty("frame")||(r.frame=0,r.currentX=r.frames[r.frame][0]*n,r.currentY=r.frames[r.frame][1]*a,r.targetX=r.currentX,r.targetY=r.currentY),r.travelledX>=r.distanceX&&r.travelledY>=r.distanceY||r.currentX==r.targetX&&e.time.currentY>=r.targetY){r.frame++,r.travelledX=0,r.travelledY=0,r.frame>=r.frames.length&&(r.frame=0,r.pingpong||(r.currentX=r.frames[r.frame][0]*n,r.currentY=e.time.frames[r.frame][1]*a)),void 0!==r.frames[r.frame][2]&&e.animation&&(e.animation.animationIndex=r.frames[r.frame][2]);var i=r.frames[r.frame][0]*n,o=r.frames[r.frame][1]*a,c=i-r.currentX,s=o-r.currentY;r.distanceX=Math.abs(c),r.distanceY=Math.abs(s),r.dx=c/r.duration*.001,r.dy=s/r.duration*.001}var d=_$.dt*r.dx,m=_$.dt*r.dy;return r.currentX+=d,r.currentY+=m,r.travelledX+=Math.abs(d),r.travelledY+=Math.abs(m),{x:r.currentX,y:r.currentY}},e.mouseAnimation=function(e,t){},e.scrollAnimation=function(e,t){var n,a,r,i=t.canvas,o=(t.context,t.halfWidth),c=t.halfHeight,s=_$.scrollY+.5*_$.screenHeight-(t.top+.5*i.offsetHeight),d=0>s?"below":s>0?"above":"center";switch(d){case"below":n=e.scroll.center,a=e.scroll.below,r=-1;break;case"center":n=e.scroll.center,a=e.scroll.center,r=0;break;case"above":n=e.scroll.center,a=e.scroll.above,r=1}var m=_$.screenHeight/2,u=0;if(x=0,a.hasOwnProperty("y")){var l=(a.y-n.y)*c,f=r*(l/m);u=f*s+e.scroll.center.y*c}if(a.hasOwnProperty("x")){var l=(a.x-n.x)*o,f=r*l/m;x=f*s+e.scroll.center.x*o}return{x:x,y:u}},_$.addUpdate(e.update,e.draw),e};