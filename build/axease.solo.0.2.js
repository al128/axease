window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}()),function(e){e._$||(e._$={},_$.f=function(e){return document.querySelectorAll(e)},_$.on=function(e,t,n){for(var a=0;a<t.length;a++)e.addEventListener(t[a],n)},_$.log=function(e,t){this.lastLog!=e&&(console.log(e,t),this.lastLog=e)},_$.getScreen=function(e){var t=_$.f(e)[0],n=t.getContext("2d");return{canvas:t,context:n}},_$.img={},_$.createImage=function(e,t){function n(){a--,0==a&&t&&t()}if("object"==typeof e){var a=e.length;return void e.forEach(function(e){_$.img[e.id]=_$.createImage(e.url,n)})}var r=document.createElement("img");return r.onload=function(){t&&t(r)},r.src=e,r},_$.getElTop=function(e){return e.getBoundingClientRect().top+_$.scrollY},_$.isElVisible=function(e){var t=_$.getElTop(e),n=e.offsetHeight,a=t+n;return _$.scrollY+_$.screenHeight>=t&&_$.scrollY<a},_$.prevTime=Date.now(),_$.fps=24,_$.dt=1e3/_$.fps,_$.updates=[],_$.accumulator=0,_$.scrollY=0,_$.resize=!1,_$.screenWidth=0,_$.screenHeight=0,_$.midpoint=Math.round(window.innerHeight/2),_$.start=function(){_$._started||(_$._started=!0,_$.update())},_$.update=function(){requestAnimationFrame(function(){var e=Date.now();_$.time=e,_$.passed=e-_$.prevTime,_$.resize=window.innerHeight!==_$.screenHeight||window.innerWidth!==_$.screenWidth,_$.screenWidth=window.innerWidth,_$.screenHeight=window.innerHeight;var t=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;for(_$.scrollY=t,_$.accumulator+=_$.passed;_$.accumulator>=_$.dt;)_$.updates.forEach(function(e){e(_$.dt)}),_$.accumulator-=_$.dt;_$.prevTime=e,_$.update()})})}(window);var Axease=function(){var e=this;return e.elements=[],e.update=function(){e.elements.forEach(function(t){if(_$.isElVisible(t.screen.canvas)){t.screen.context.clearRect(0,0,t.screen.canvas.width,t.screen.canvas.height);var n={canvas:t.screen.canvas,context:t.screen.context,top:_$.getElTop(t.screen.canvas),halfWidth:.5*t.screen.canvas.width,halfHeight:.5*t.screen.canvas.height};t.sprites.forEach(function(a){var r={};a.scroll?r=e.scrollAnimation(a,n):a.mouse||a.time&&(r=e.timeAnimation(a,n)),t.screen.context.drawImage(e.currentFrame(a),r.x+n.halfWidth-a.width/2,r.y+n.halfHeight-a.height/2,a.width||a.img.naturalWidth,a.height||a.img.naturalHeight)})}})},e.currentFrame=function(e){if(!e.animation)return e.img;if(!e.animation.canvas){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");e.animation.canvas=t,e.animation.context=n,e.animation.hasOwnProperty("animationIndex")||(e.animation.animationIndex=0)}var a=e.animation;return a.length&&(a=e.animation[a.animationIndex]),a.hasOwnProperty("frame")||(a.frame=0,a.lastDraw=Date.now()),_$.time>a.lastDraw+a.duration&&(a.frame++,a.frame>=a.frames.length&&(a.frame=0),a.lastDraw=_$.time),e.animation.context.clearRect(0,0,e.width,e.height),e.animation.context.drawImage(e.img,a.frames[a.frame][0]*e.width,a.frames[a.frame][1]*e.height,e.width,e.height,0,0,e.width,e.height),e.animation.canvas},e.timeAnimation=function(e,t){var n=(t.canvas,t.context,t.halfWidth),a=t.halfHeight,r=e.time;if(x=0,r.hasOwnProperty("frame")||(r.frame=0,r.currentX=r.frames[r.frame][0]*n,r.currentY=r.frames[r.frame][1]*a,r.targetX=r.currentX,r.targetY=r.currentY),r.travelledX>=r.distanceX&&r.travelledY>=r.distanceY||r.currentX==r.targetX&&e.time.currentY>=r.targetY){r.frame++,r.travelledX=0,r.travelledY=0,r.frame>=r.frames.length&&(r.frame=0,r.pingpong||(r.currentX=r.frames[r.frame][0]*n,r.currentY=e.time.frames[r.frame][1]*a)),void 0!==r.frames[r.frame][2]&&e.animation&&(e.animation.animationIndex=r.frames[r.frame][2]);var i=r.frames[r.frame][0]*n,o=r.frames[r.frame][1]*a,c=i-r.currentX,s=o-r.currentY;r.distanceX=Math.abs(c),r.distanceY=Math.abs(s),r.dx=c/r.duration*.001,r.dy=s/r.duration*.001}var m=_$.dt*r.dx,l=_$.dt*r.dy;return r.currentX+=m,r.currentY+=l,r.travelledX+=Math.abs(m),r.travelledY+=Math.abs(l),{x:r.currentX,y:r.currentY}},e.mouseAnimation=function(){},e.scrollAnimation=function(e,t){var n,a,r,i=t.canvas,o=(t.context,t.halfWidth),c=t.halfHeight,s=_$.scrollY+.5*_$.screenHeight-(t.top+.5*i.offsetHeight),m=0>s?"below":s>0?"above":"center";switch(m){case"below":n=e.scroll.center,a=e.scroll.below,r=-1;break;case"center":n=e.scroll.center,a=e.scroll.center,r=0;break;case"above":n=e.scroll.center,a=e.scroll.above,r=1}var l=_$.screenHeight/2,u=0;if(x=0,a.hasOwnProperty("y")){var d=(a.y-n.y)*c,f=r*(d/l);u=f*s+e.scroll.center.y*c}if(a.hasOwnProperty("x")){var d=(a.x-n.x)*o,f=r*d/l;x=f*s+e.scroll.center.x*o}return{x:x,y:u}},_$.updates.push(e.update),e};